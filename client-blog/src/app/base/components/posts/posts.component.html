<link href="//cdn.quilljs.com/1.2.3/quill.snow.css" rel="stylesheet">

<app-home></app-home>


<div class="container">
<ol class="breadcrumb my-4">
  <li class=" breadcrumb-item "><a routerLink = '' >Boards</a></li>
  <li class=" breadcrumb-item " ><a routerLink = '../../../' >Topics</a></li>
<li class=" breadcrumb-item active " >Posts</li>
</ol>
<form (ngSubmit)="onSubmit()" class="editor" #addPostForm="ngForm">
  <div id="editor-container" style="height: 220px;"></div>

  <div class=" row m-3">
    <button type='submit' class="btn btn-success ">Post</button>
  </div>
</form>



    <div *ngFor="let post of posts ; let i=index" class="infinite-container ">
      <div class="infinite-item border border-dark">
    <div  *ngIf="i==0" class="card-header text-white bg-dark py-2 px-3"> {{ topic.subject }} </div>

  <div class="card-body p-3 border border-secondary">
    <div class="row">
      <div class="col-2">
        <img src=" post.created_by " alt=" {{post.created_by.username }}" class="w-100 rounded">
        <small>Posts: {{ post.created_by.posts }}  </small>
      </div>
      <div class="col-10">
        <div class="row mb-3">
          <div class="col-6">
            <strong class="text-muted">{{ post.created_by }} </strong>
          </div>
          <div class="col-6 text-right">
            <small class="text-muted"> {{post.created_at | date:'mediumTime'}} </small>
          </div>
        </div>
          {{ post.message}}
        <div *ngIf='user && user.username==post.created_by'class="mt-3">
          <a [routerLink]="['./', post.id]"
             [queryParams]="{'post': post}"
             href='#'
             class="btn btn-primary btn-sm"
             role="button">Edit</a>
        </div>
      </div>
   </div>
  </div>
</div>

</div>
<div class="infinite-scroll"
     infiniteScroll
     debounce
     [infiniteScrollDistance]="0.1"
     [infiniteScrollThrottle]="1000"
     (scrolled)="onScroll()">

</div>

</div>
